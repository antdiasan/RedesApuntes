# 4. Direccionamiento IP: Público vs Privado

El direccionamiento IP se divide en dos categorías principales: ***direcciones públicas*** y ***direcciones privadas***. Comprender sus diferencias y usos es crucial para diseñar redes eficientes y seguras.

En los comienzos de Internet, todas las direcciones eran públicas. No se había previsto la necesidad de direcciones privadas, ya que el número de dispositivos conectados era mucho menor y parecía suficiente con las direcciones IPv4 disponibles. Esto ofrecía ventajas, como permitir que dos dispositivos pudieran establecer una conexión punto a punto directa, por ejemplo, para realizar una videoconferencia, sin intermediarios.

Sin embargo, la escasez de direcciones IPv4 llevó a la necesidad de implementar soluciones para optimizar su uso. Una de las más importantes fue la introducción de direcciones privadas, definidas en el ***RFC 1918***. Estas direcciones no son reutilizables en Internet y requieren el uso de **NAT** (Network Address Translation) para acceder a redes públicas. Aunque esta solución permitió conectar más dispositivos dentro de una red privada, también introdujo ciertos inconvenientes.

Un ejemplo de estas limitaciones es la videoconferencia, comentada anteriormente. Con direcciones privadas, ya no es posible establecer una conexión punto a punto directa entre los dos dispositivos. En su lugar, ambos dispositivos deben conectarse a través de un *servidor intermedio* que actúa como puente, gestionando la comunicación y permitiendo que los datos fluyan entre ellos.

Las direcciones de Internet no las “cogemos” libremente cada uno, sino que son asignadas de manera organizada, y nos las proporciona un **ISP** (Internet Service Provider). Este ISP, a su vez, obtiene los bloques de direcciones IP de una organización regional de asignación como **RIPE** (en Europa) o **ARIN** (en América del Norte), que son gestionadas y coordinadas a nivel global por la ***IANA*** (Internet Assigned Numbers Authority), una entidad creada específicamente con este objetivo.

## Direcciones IP Públicas

**Definición:** Son direcciones únicas a nivel global, asignadas por los ISP (Proveedores de Servicios de Internet).  
**Usos:** Permiten la comunicación directa de dispositivos con Internet.  
**Ejemplo:** 8.8.8.8 (servidor DNS de Google).

## Direcciones IP Privadas

**Definición:** Son direcciones utilizadas en redes internas y no se pueden enrutar directamente en Internet.  
**Usos:** Redes domésticas, corporativas y otros entornos internos.

Existen unos rangos privados definidos por la IETF (RFC 1918). Así mismo, en la propia Wikipedia se pueden comprobar los rangos de direcciones IPv4 que están reservadas:

| Bloque de direcciones | Rango |
|-----------------------|-------|
| 0.0.0.0/8             | 0.0.0.0–0.255.255.255 |
| 10.0.0.0/8            | 10.0.0.0–10.255.255.255 |
| 100.64.0.0/10         | 100.64.0.0–100.127.255.255 |
| 127.0.0.0/8           | 127.0.0.0–127.255.255.255 |
| 169.254.0.0/16        | 169.254.0.0–169.254.255.255 |
| 172.16.0.0/12         | 172.16.0.0–172.31.255.255 |
| 192.0.0.0/24          | 192.0.0.0–192.0.0.255 |
| 192.0.2.0/24          | 192.0.2.0–192.0.2.255 |
| 192.88.99.0/24        | 192.88.99.0–192.88.99.255 |
| 192.168.0.0/16        | 192.168.0.0–192.168.255.255 |
| 198.18.0.0/15         | 198.18.0.0–198.19.255.255 |
| 198.51.100.0/24       | 198.51.100.0–198.51.100.255 |
| 203.0.113.0/24        | 203.0.113.0–203.0.113.255 |
| 224.0.0.0/4           | 224.0.0.0–239.255.255.255 |
| 240.0.0.0/4           | 240.0.0.0–255.255.255.254 |
| 255.255.255.255/32    | 255.255.255.255 |

### Comparativa Público vs Privado

| Característica        | Pública              | Privada              |
|-----------------------|----------------------|----------------------|
| Visibilidad           | Global               | Local                |
| Enrutabilidad         | Enrutada en Internet | No enrutada en Internet |
| Asignación            | Por el ISP           | Por el administrador de red |
| Ejemplo               | 8.8.8.8              | 192.168.1.1          |


### Relación con NAT

El ***NAT*** (Network Address Translation) permite que varias direcciones privadas se traduzcan a una única dirección pública para acceder a Internet. Esto se puede resumir en:

- Optimiza el uso de direcciones públicas.
- Añade una capa adicional de seguridad al ocultar la estructura interna de la red.


## Resolución de Nombres: Del Fichero Hosts al Sistema DNS

En las redes modernas, la resolución de nombres de dominio es una tarea esencial para facilitar la comunicación entre dispositivos. Antes de la adopción generalizada del sistema DNS (Domain Name System), los nombres de dominio se resolvían de manera manual mediante un fichero llamado ***hosts***.

El fichero **hosts** es un archivo de texto plano que permite asignar manualmente nombres de dominio a direcciones IP. En sistemas Windows, este archivo se encuentra en: `C:\Windows\System32\drivers\etc\hosts`.

Cada línea del fichero establece una relación entre una dirección IP y un nombre de dominio. Por ejemplo:

| Direccion IP | Dominio       |
|--------------|---------------|
| 127.0.0.1    | localhost     |
|192.168.1.10  | servidor.local|
|142.250.186.78| google.com    |

El sistema operativo consulta este archivo antes de realizar cualquier consulta al servidor DNS configurado. Si el nombre de dominio está definido en el fichero hosts, se utiliza esa entrada.


### Fichero Hosts

En los años 70 y principios de los 80, cuando las redes eran pequeñas y estaba en desarrollo **ARPANET**, el fichero hosts era la principal herramienta para resolver nombres de dominio. Este archivo era mantenido de manera centralizada y distribuido manualmente a los sistemas conectados.

A medida que las redes crecieron, el mantenimiento manual del fichero hosts se volvió imprácticable. Sus principales desventajas eran:

- Escalabilidad limitada: Cada cambio en la red requería actualizar y redistribuir el archivo.
- Falta de dinamismo: No podía adaptarse fácilmente a cambios frecuentes en la infraestructura de red.
  

### La transición al Sistema DNS

En 1983, el ***protocolo DNS*** fue diseñado para resolver estos problemas, automatizando la resolución de nombres mediante servidores distribuidos jerárquicamente. Esto eliminó la necesidad de depender exclusivamente del fichero hosts. Hoy en día, el sistema DNS es el estándar global, aunque el fichero hosts todavía puede ser útil en casos específicos, como:

- Pruebas locales en redes de desarrollo.
- Bloqueo de sitios web no deseados.
- Redirecciones temporales para dominios específicos.

<br>
<br>

> **Nota Importante**: 
> El siguiente es un ejemplo de cómo se puede configurar el archivo hosts en un sistema Windows para bloquear un sitio web o redirigir un dominio:

> | Direccion IP | Dominio       |
> |--------------|---------------|
> | 127.0.0.1    | localhost     |
> | 192.168.1.10 | servidor.local|
> | 127.0.0.1	 | example.com   |
> | 192.168.1.100| pruebas.local |

